{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"$id": "utils.json",
	"title": "Utility Schema Functions",
	"description": "A file containing various utility functions for Pf2eTools.",
	"type": "object",
	"version": "0.0.1",
	"definitions": {
		"range": {
			"type": "object",
			"properties": {
				"entry": {
					"type": "string"
				},
				"unit": {
					"type": "string",
					"enum": [
						"touch",
						"feet",
						"mile",
						"planetary",
						"interplanar",
						"unlimited",
						"unknown"
					]
				},
				"number": {
					"type": "integer",
					"inclusiveMinimum": 0
				}
			},
			"required": [
				"unit"
			],
			"additionalProperties": false
		},
		"sourceList": {
			"$ref": "_generated/sources.json#/definitions/sourceList"
		},
		"alignmentTraits": {
			"type": "string",
			"anyOf": [
				{
					"$ref": "#/definitions/alignmentNames"
				},
				{
					"$ref": "#/definitions/alignmentTags"
				}
			]
		},
		"alignmentNames": {
			"type": "string",
			"description": "L: Lawful\n N: Neutral\n NX: Neutral (law/chaos axis)\n NY: Neutral (good/evil axis)\n C: Chaotic\n G: Good\n E: Evil\n U: Unaligned\n A: Any",
			"enum": [
				"any",
				"lawful",
				"chaotic",
				"good",
				"evil",
				"neutral",
				"all"
			]
		},
		"tags": {
			"type": "string",
			"description": "Tags used in abilities and \"data\" entries. Defines what type of entry to draw data from.",
			"enum": [
				"action",
				"ritual",
				"curse",
				"ability",
				"affliction",
				"feat",
				"item",
				"creature",
				"table"
			]
		},
		"alignmentTags": {
			"type": "string",
			"description": "CE: Chaotic Evil\nCG: Chaotic Good\nCN: Chaotic Neutral\nLE: Lawful Evil\nLG: Lawful Good\nLN: Lawful Neutral\nN: Neutral\nNE: Neutral Evil\nNG: Neutral Good",
			"enum": [
				"ce",
				"cg",
				"cn",
				"le",
				"lg",
				"ln",
				"n",
				"ne",
				"ng"
			]
		},
		"speed": {
			"type": "object",
			"patternProperties": {
				"^(walk|climb|fly|burrow|swim)$": {
					"type": "integer",
					"exclusiveMinimum": 0
				}
			},
			"properties": {
				"speedNote": {
					"type": "string"
				}
			},
			"additionalProperties": {
				"type": "integer",
				"exclusiveMinimum": 0
			}
		},
		"frequency": {
			"type": "object",
			"oneOf": [
				{
					"properties": {
						"special": {
							"$comment": "For special cases that require a custom string.",
							"type": "string"
						}
					},
					"additionalProperties": false,
					"required": [
						"special"
					]
				},
				{
					"properties": {
						"freq": {
							"$comment": "In code return \"Once\" if =1, \"Twice\" if =2, and \"`n` times\" otherwise.",
							"description": "How frequent it is; once, twice etc.",
							"type": "integer",
							"default": 1,
							"exclusiveMinimum": 0
						},
						"recurs": {
							"$comment": "Assume false unless provided. If provided, render \"every\" instead of \"per\".",
							"description": "Use \"every\" instead of \"per\".",
							"type": "boolean",
							"default": false
						},
						"overcharge": {
							"$comment": "Assume false unless provided. If provided, render \", plus overcharge\".",
							"description": "Adds \", plus overcharge\"; used for Wands.",
							"type": "boolean",
							"default": false
						},
						"interval": {
							"$comment": "Assume =1 unless provided.",
							"description": "The number of units e.g. every *three* hours.",
							"type": "integer",
							"default": 1,
							"exclusiveMinimum": 0
						},
						"unit": {
							"$comment": "If \"interval\" is provided and > 1, then return the plural form of the unit.",
							"type": "string",
							"enum": [
								"turn",
								"round",
								"minute",
								"hour",
								"day",
								"week",
								"month",
								"year"
							]
						},
						"customUnit": {
							"description": "Name of a custom unit, use the correct single/plural form.",
							"type": "string",
							"examples": [
								"epoch",
								"gem"
							]
						}
					},
					"additionalProperties": false,
					"oneOf": [
						{
							"required": [
								"freq",
								"unit"
							]
						},
						{
							"required": [
								"freq",
								"customUnit"
							]
						}
					]
				}
			]
		},
		"activity": {
			"type": "object",
			"required": [
				"number",
				"unit"
			],
			"properties": {
				"number": {
					"type": "integer"
				},
				"unit": {
					"type": "string",
					"enum": [
						"free",
						"reaction",
						"action",
						"round",
						"minute",
						"hour",
						"varies"
					]
				},
				"entry": {
					"type": "string",
					"not": {
						"pattern": "^{@as [123RFrf]}$"
					}
				}
			},
			"additionalProperties": false
		},
		"price": {
			"type": "object",
			"properties": {
				"coin": {
					"type": "string",
					"enum": [
						"gp",
						"sp",
						"cp",
						"pp"
					]
				},
				"amount": {
					"type": "number"
				}
			},
			"required": [
				"amount",
				"coin"
			]
		},
		"otherSources": {
			"type": "object",
			"patternProperties": {
				"^(Reprinted|Expanded|Originally)$": {
					"type": "array",
					"items": {
						"type": "string",
						"pattern": "^[\\w\\d&]+\\|\\d+$"
					},
					"examples": [
						[
							""
						]
					],
					"uniqueItems": true
				}
			},
			"additionalProperties": false
		},
		"skillBonus": {
			"$comment": "Just keeping this around in case we want it later, currently unused",
			"type": "object",
			"propertyNames": {
				"$ref": "#/definitions/skillName"
			},
			"additionalProperties": {
				"type": "string",
				"pattern": "^(\\+|-)\\d$"
			}
		},
		"prerequisite": {
			"type": "array",
			"items": {
				"type": "object",
				"properties": {
					"level": {
						"oneOf": [
							{
								"type": "object",
								"properties": {
									"level": {
										"type": "integer"
									},
									"class": {
										"type": "object",
										"properties": {
											"name": {
												"$ref": "#/definitions/className"
											},
											"source": {
												"$ref": "#/definitions/sourceList"
											},
											"visible": {
												"description": "Governs whether or not the class name is visible in the list display/prerequisite line. *Not* recommended for features which implicitly carry a class restriction, such as Eldritch Invocations.",
												"type": "boolean"
											}
										},
										"required": [
											"name"
										],
										"additionalProperties": false
									},
									"subclass": {
										"type": "object",
										"properties": {
											"name": {
												"type": "string"
											},
											"source": {
												"$ref": "#/definitions/sourceList"
											},
											"visible": {
												"description": "Governs whether or not the class name is visible in the list display/prerequisite line. *Not* recommended for features which implicitly carry a class restriction, such as Eldritch Invocations.",
												"type": "boolean"
											}
										},
										"required": [
											"name"
										],
										"additionalProperties": false
									}
								},
								"required": [
									"level"
								],
								"additionalProperties": false
							},
							{
								"type": "integer",
								"minimum": 1
							}
						]
					},
					"pact": {
						"type": "string",
						"examples": [
							"Chain",
							"Tome",
							"Blade",
							"Talisman"
						]
					},
					"patron": {
						"type": "string",
						"examples": [
							"The Archfey",
							"The Fiend",
							"The Great Old One",
							"The Hexblade",
							"The Raven Queen",
							"The Seeker"
						]
					},
					"spell": {
						"type": "array",
						"items": {
							"$ref": "entry.json"
						}
					},
					"feat": {
						"type": "array",
						"items": {
							"$ref": "entry.json"
						}
					},
					"feature": {
						"type": "array",
						"items": {
							"$ref": "entry.json"
						}
					},
					"item": {
						"type": "array",
						"items": {
							"$ref": "entry.json"
						}
					},
					"other": {
						"description": "A free text prerequisite",
						"type": "string"
					},
					"otherSummary": {
						"description": "A free text prerequisite, with a shortened form for list display.",
						"type": "object",
						"properties": {
							"entry": {
								"type": "string"
							},
							"entrySummary": {
								"description": "Used in short/list displays",
								"type": "string"
							}
						},
						"required": [
							"entry",
							"entrySummary"
						],
						"additionalProperties": false
					},
					"race": {
						"type": "array",
						"items": {
							"type": "object",
							"properties": {
								"name": {
									"type": "string"
								},
								"displayEntry": {
									"description": "Optional long-form name to be used in the rendered entity.",
									"type": "string"
								},
								"subrace": {
									"type": "string"
								}
							},
							"required": [
								"name"
							],
							"additionalProperties": false
						}
					},
					"ability": {
						"type": "array",
						"items": {
							"type": "object",
							"properties": {
								"str": {
									"type": "integer"
								},
								"dex": {
									"type": "integer"
								},
								"con": {
									"type": "integer"
								},
								"int": {
									"type": "integer"
								},
								"wis": {
									"type": "integer"
								},
								"cha": {
									"type": "integer"
								}
							},
							"additionalProperties": false
						}
					},
					"spellcasting": {
						"type": "boolean"
					},
					"spellcasting2020": {
						"description": "Renders with the updated text found in UA2020: Feats",
						"type": "boolean"
					},
					"psionics": {
						"type": "boolean"
					},
					"proficiency": {
						"type": "array",
						"items": {
							"type": "object",
							"properties": {
								"armor": {
									"type": "string",
									"enum": [
										"light",
										"medium",
										"heavy"
									]
								},
								"weapon": {
									"type": "string",
									"enum": [
										"simple",
										"martial"
									]
								}
							},
							"additionalProperties": false,
							"minProperties": 1
						},
						"minItems": 1
					},
					"alignment": {
						"type": "array",
						"items": {
							"$ref": "#/definitions/alignmentTraits"
						}
					},
					"note": {
						"description": "An additional note that accompanies the proficiencies, but is not part of them.",
						"type": "string"
					}
				},
				"additionalProperties": false,
				"minProperties": 1
			}
		},
		"implies": {
			"type": "object",
			"properties": {
				"item": {
					"type": "object",
					"properties": {
						"_fDamageType": {
							"type": "object",
							"properties": {
								"regex": {
									"type": "string",
									"format": "regex"
								},
								"flags": {
									"type": "string",
									"pattern": "^[gmixsuXUAJ]*$"
								},
								"value": {
									"type": "string"
								}
							},
							"minProperties": 3,
							"additionalProperties": false
						}
					}
				},
				"creature": {
					"type": "object",
					"properties": {
						"_fimmunities": {
							"type": "array",
							"items": {
								"type": "string",
								"enum": [
									"emotion",
									"fear",
									"possession",
									"mental"
								]
							},
							"uniqueItems": true
						}
					},
					"additionalProperties": false,
					"minProperties": 1
				},
				"spell": {
					"type": "object",
					"properties": {
						"_fSchool": {
							"type": "string",
							"$ref": "#/definitions/schoolTitle"
						}
					},
					"additionalProperties": false,
					"minProperties": 1
				}
			},
			"additionalProperties": false,
			"minProperties": 1
		},
		"abilityMods": {
			"type": "object",
			"propertyNames": {
				"type": "string",
				"enum": [
					"str",
					"dex",
					"con",
					"int",
					"wis",
					"cha"
				]
			},
			"minProperties": 6,
			"additionalProperties": {
				"type": "integer",
				"minimum": -5,
				"maximum": 12
			}
		},
		"abilityScores": {
			"type": "object",
			"propertyNames": {
				"type": "string",
				"enum": [
					"str",
					"dex",
					"con",
					"int",
					"wis",
					"cha"
				]
			},
			"minProperties": 6,
			"additionalProperties": {
				"type": "integer",
				"minimum": 0,
				"maximum": 30
			}
		},
		"anyTraitOld": {
			"type": "string",
			"description": "Any Trait in the game.",
			"anyOf": [
				{
					"$ref": "#/definitions/rarity"
				},
				{
					"$ref": "#/definitions/className"
				},
				{
					"$ref": "#/definitions/school"
				},
				{
					"$ref": "#/definitions/tradition"
				},
				{
					"$ref": "#/definitions/damageType"
				},
				{
					"$ref": "#/definitions/effectName"
				},
				{
					"$ref": "#/definitions/ancestryName"
				},
				{
					"$ref": "#/definitions/creatureTypes"
				},
				{
					"$ref": "#/definitions/alignmentTraits"
				},
				{
					"$ref": "#/definitions/size"
				},
				{
					"enum": [
						"artifact",
						"archetype",
						"secret",
						"dedication",
						"general",
						"skill",
						"prestige",
						"attack",
						"move",
						"exploration",
						"downtime",
						"energy",
						"concentrate",
						"finisher",
						"manipulate",
						"auditory",
						"flourish",
						"tandem",
						"stance",
						"spellshot",
						"unstable",
						"reckless",
						"trap",
						"structure",
						"saggorak",
						"cursed",
						"mechanical",
						"potion",
						"tattoo",
						"consumable",
						"verbal",
						"open",
						"snare",
						"bomb",
						"splash",
						"talisman",
						"elixir",
						"rage",
						"lineage",
						"metamagic",
						"press",
						"oath",
						"vigilante",
						"multiclass",
						"social",
						"air",
						"earth",
						"water",
						"magical",
						"aura",
						"modification",
						"class",
						"extradimensional",
						"evolution",
						"pervasive magic",
						"eidolon",
						"true name",
						"shadow",
						"contract",
						"invested",
						"curse",
						"virulent",
						"nonlethal",
						"darkness",
						"plant",
						"fungus",
						"olfactory",
						"tethered",
						"inhaled",
						"incarnate",
						"shove",
						"alchemical",
						"mutant",
						"serpentfolk",
						"death",
						"mindless",
						"light",
						"emotion",
						"catalyst",
						"companion",
						"ingested",
						"fear",
						"charm",
						"summoned",
						"summon",
						"clockwork",
						"kaiju",
						"steam",
						"city",
						"subjective gravity",
						"timeless",
						"metropolis",
						"erratic",
						"static",
						"flowing",
						"metamorphic",
						"unbounded",
						"town",
						"humanoid",
						"construct",
						"amphibious",
						"precious",
						"aeon",
						"agile",
						"finesse",
						"beast",
						"elemental",
						"dragon",
						"demon",
						"devil",
						"fiend",
						"monitor",
						"psychopomp",
						"ooze",
						"angel",
						"celestial",
						"ethereal",
						"phantom",
						"astral",
						"propulsive",
						"disarm",
						"backswing",
						"deadly",
						"sweep",
						"trip",
						"forceful",
						"thrown",
						"revolutionary",
						"militaristic",
						"academic",
						"wayfaring",
						"consecration"
					]
				},
				{
					"enum": [
						"[magical tradition]",
						"[class]"
					]
				},
				{
					"type": "string",
					"oneOf": [
						{
							"pattern": "^volley \\d+ feet$"
						},
						{
							"pattern": "Additive \\d"
						},
						{
							"pattern": "^reach \\d+ feet$"
						},
						{
							"pattern": "^deadly \\d*d\\d+$"
						},
						{
							"pattern": "^range( increment)? \\d+ feet$"
						},
						{
							"pattern": "^range \\d+ feet$"
						},
						{
							"pattern": "^reload \\d+$"
						},
						{
							"pattern": "^thrown \\d+ feet$"
						},
						{
							"pattern": "^fatal d\\d+$"
						},
						{
							"pattern": "^two-hand d\\d+$"
						}
					]
				}
			]
		},
		"anyTrait": {
			"$ref": "_generated/traits.json#/definitions/anyTrait"
		},
		"loreSubjects": {
			"type": "string",
			"enum": [
				"dragon",
				"kintargo",
				"dahak",
				"architecture",
				"breachill"
			]
		},
		"ability": {
			"type": "string",
			"enum": [
				"strength",
				"dexterity",
				"constitution",
				"intelligence",
				"wisdom",
				"charisma",
				"free"
			]
		},
		"abilityAbbv": {
			"type": "string",
			"enum": [
				"str",
				"dex",
				"con",
				"int",
				"wis",
				"cha"
			]
		},
		"ancestryName": {
			"type": "string",
			"enum": [
				"kitsune",
				"kobold",
				"grippli",
				"aasimar",
				"changeling",
				"human",
				"catfolk",
				"elf",
				"orc",
				"ratfolk",
				"dhampir",
				"duskwalker",
				"ganzi",
				"ifrit",
				"geniekin",
				"gnome",
				"goblin",
				"tiefling",
				"halfling",
				"dwarf",
				"half-elf",
				"half-orc",
				"tengu",
				"automaton",
				"hobgoblin",
				"poppet",
				"goloma",
				"anadi",
				"gnoll",
				"lizardfolk",
				"conrasu",
				"shisk",
				"oread",
				"suli",
				"sylph",
				"undine",
				"beastkin",
				"aphorite",
				"android",
				"azarketi",
				"fetchling",
				"aberration",
				"leshy",
				"shoony",
				"fey",
				"sprite",
				"strix"
			]
		},
		"creatureTypes": {
			"type": "string",
			"enum": [
				"aberration",
				"animal",
				"astral",
				"beast",
				"celestial",
				"construct",
				"dragon",
				"elemental",
				"ethereal",
				"fey",
				"fiend",
				"fungus",
				"humanoid",
				"monitor",
				"ooze",
				"plant",
				"spirit",
				"undead"
			]
		},
		"languages": {
			"$ref": "_generated/languages.json#/definitions/language"
		},
		"languagesOld": {
			"type": "string",
			"enum": [
				"Common",
				"Infernal",
				"Varisian",
				"Anadi",
				"Orcish",
				"Goblin",
				"Undercommon",
				"Draconic",
				"Mwangi",
				"Aklo",
				"Taldane",
				"Tien"
			]
		},
		"skillName": {
			"type": "string",
			"description": "A Skill Trait",
			"oneOf": [
				{
					"enum": [
						"acrobatics",
						"arcana",
						"athletics",
						"crafting",
						"deception",
						"diplomacy",
						"intimidation",
						"lore",
						"medicine",
						"nature",
						"occultism",
						"performance",
						"religion",
						"society",
						"stealth",
						"survival",
						"thievery"
					]
				},
				{
					"pattern": "^{[\\w '\\-]+} lore$"
				}
			]
		},
		"skillNameUpper": {
			"type": "string",
			"description": "A Skill Trait",
			"enum": [
				"Acrobatics",
				"Arcana",
				"Athletics",
				"Crafting",
				"Deception",
				"Diplomacy",
				"Intimidation",
				"Lore",
				"Medicine",
				"Nature",
				"Occultism",
				"Performance",
				"Religion",
				"Society",
				"Stealth",
				"Survival",
				"Thievery"
			]
		},
		"classNameSourced": {
			"type": "string",
			"enum": [
				"alchemist",
				"barbarian",
				"bard",
				"champion",
				"cleric",
				"druid",
				"fighter",
				"gunslinger|G&G",
				"inventor|G&G",
				"investigator|APG",
				"magus|SoM",
				"monk",
				"oracle|APG",
				"ranger",
				"rogue",
				"sorcerer",
				"summoner|SoM",
				"swashbuckler|APG",
				"witch|APG",
				"psychic|DA",
				"thaumaturge|DA",
				"wizard"
			]
		},
		"className": {
			"type": "string",
			"enum": [
				"alchemist",
				"barbarian",
				"bard",
				"champion",
				"cleric",
				"druid",
				"fighter",
				"psychic",
				"thaumaturge",
				"gunslinger",
				"inventor",
				"investigator",
				"magus",
				"monk",
				"oracle",
				"ranger",
				"rogue",
				"sorcerer",
				"summoner",
				"swashbuckler",
				"witch",
				"wizard"
			]
		},
		"rarity": {
			"type": "string",
			"enum": [
				"common",
				"uncommon",
				"rare",
				"unique"
			]
		},
		"tradition": {
			"type": "string",
			"enum": [
				"arcane",
				"divine",
				"occult",
				"primal"
			]
		},
		"school": {
			"type": "string",
			"enum": [
				"abjuration",
				"conjuration",
				"divination",
				"enchantment",
				"evocation",
				"illusion",
				"necromancy",
				"transmutation"
			]
		},
		"schoolTitle": {
			"type": "string",
			"enum": [
				"Abjuration",
				"Conjuration",
				"Divination",
				"Enchantment",
				"Evocation",
				"Illusion",
				"Necromancy",
				"Transmutation"
			]
		},
		"size": {
			"type": "string",
			"enum": [
				"tiny",
				"small",
				"medium",
				"large",
				"huge",
				"gargantuan"
			]
		},
		"sizeAbbv": {
			"type": "string",
			"enum": [
				"T",
				"S",
				"M",
				"L",
				"H",
				"G"
			]
		},
		"damage": {
			"$comment": "Draft Damage object style",
			"type": "object",
			"propertyNames": {
				"$ref": "#/definitions/damageType"
			},
			"additionalProperties": {
				"oneOf": [
					{
						"type": "boolean",
						"enum": [
							true
						]
					},
					{
						"type": "object",
						"properties": {
							"versatile": {
								"type": "boolean",
								"enum": [
									true
								]
							},
							"persistent": {
								"type": "boolean",
								"enum": [
									true
								]
							}
						},
						"additionalProperties": false
					}
				]
			}
		},
		"damageType": {
			"$comment": "FIXME: This should be replaced by something accounting for splash and persistent damage, as well as trait-induced damage like versatile and modular",
			"type": "string",
			"enum": [
				"electricity",
				"sonic",
				"acid",
				"poison",
				"cold",
				"fire",
				"slashing",
				"bludgeoning",
				"piercing",
				"positive",
				"negative",
				"force",
				"bleed",
				"precision",
				"evil",
				"good",
				"chaotic",
				"lawful",
				"mental",
				"persistent",
				"persistent fire",
				"persistent bleed damage",
				"versatile <p>",
				"versatile <s>",
				"versatile fire",
				"versatile p or s",
				"persistent bleed",
				"versatile electricity",
				"electricity splash",
				"versatile cold, electricity, or fire"
			]
		},
		"damageTypeTags": {
			"type": "string",
			"description": "TODO"
		},
		"effectName": {
			"type": "string",
			"enum": [
				"death",
				"contingency",
				"curse",
				"detection",
				"disease",
				"emotion",
				"fear",
				"fortune",
				"healing",
				"incapacitation",
				"light",
				"linguistic",
				"misfortune",
				"morph",
				"polymorph",
				"possession",
				"prediction",
				"revelation",
				"scrying",
				"sleep",
				"teleportation",
				"visual"
			]
		},
		"weaponGroup": {
			"type": "string",
			"enum": [
				"Firearm|G&G",
				"Axe",
				"Sword",
				"Spear",
				"Sling",
				"Shield",
				"Polearm",
				"Pick",
				"Knife",
				"Hammer",
				"Flail",
				"Dart",
				"Club",
				"Brawling",
				"Bow"
			]
		},
		"armorGroup": {
			"type": "string",
			"enum": [
				"Plate",
				"Leather",
				"Chain",
				"Cloth",
				"Composite"
			]
		},
		"conditions": {
			"type": "string",
			"enum": [
				"blinded",
				"broken",
				"clumsy",
				"concealed",
				"confused",
				"controlled",
				"dazzled",
				"deafened",
				"doomed",
				"drained",
				"dying",
				"encumbered",
				"enfeebled",
				"fascinated",
				"fatigued",
				"flat-footed",
				"fleeing",
				"friendly",
				"frightened",
				"grabbed",
				"helpful",
				"hidden",
				"hostile",
				"immobilized",
				"indifferent",
				"invisible",
				"observed",
				"paralyzed",
				"persistent damage",
				"petrified",
				"prone",
				"quickened",
				"restrained",
				"sickened",
				"slowed",
				"stunned",
				"stupefied",
				"unconscious",
				"undetected",
				"unfriendly",
				"unnoticed",
				"wounded"
			]
		},
		"domains": {
			"type": "string",
			"enum": [
				"air",
				"ambition",
				"change",
				"cities",
				"cold",
				"confidence",
				"creation",
				"darkness",
				"death",
				"decay",
				"delirium",
				"destruction",
				"dreams",
				"dust",
				"duty",
				"earth",
				"family",
				"fate",
				"fire",
				"freedom",
				"glyph",
				"healing",
				"indulgence",
				"knowledge",
				"lightning",
				"luck",
				"magic",
				"might",
				"moon",
				"naga",
				"nature",
				"nightmares",
				"pain",
				"passion",
				"perfection",
				"plague",
				"protection",
				"repose",
				"secrecy",
				"sorrow",
				"souls",
				"stars",
				"sun",
				"swarm",
				"time",
				"toil",
				"travel",
				"trickery",
				"truth",
				"tyranny",
				"undeath",
				"vigil",
				"void",
				"water",
				"wealth",
				"wyrmkin",
				"zeal",
				"air (apocryphal)",
				"ambition (apocryphal)",
				"change (apocryphal)",
				"cities (apocryphal)",
				"cold (apocryphal)",
				"confidence (apocryphal)",
				"creation (apocryphal)",
				"darkness (apocryphal)",
				"death (apocryphal)",
				"decay (apocryphal)",
				"delirium (apocryphal)",
				"destruction (apocryphal)",
				"dreams (apocryphal)",
				"dust (apocryphal)",
				"duty (apocryphal)",
				"earth (apocryphal)",
				"family (apocryphal)",
				"fate (apocryphal)",
				"fire (apocryphal)",
				"freedom (apocryphal)",
				"glyph (apocryphal)",
				"healing (apocryphal)",
				"indulgence (apocryphal)",
				"knowledge (apocryphal)",
				"lightning (apocryphal)",
				"luck (apocryphal)",
				"magic (apocryphal)",
				"might (apocryphal)",
				"moon (apocryphal)",
				"naga (apocryphal)",
				"nature (apocryphal)",
				"nightmares (apocryphal)",
				"pain (apocryphal)",
				"passion (apocryphal)",
				"perfection (apocryphal)",
				"plague (apocryphal)",
				"protection (apocryphal)",
				"repose (apocryphal)",
				"secrecy (apocryphal)",
				"sorrow (apocryphal)",
				"souls (apocryphal)",
				"stars (apocryphal)",
				"sun (apocryphal)",
				"swarm (apocryphal)",
				"time (apocryphal)",
				"toil (apocryphal)",
				"travel (apocryphal)",
				"trickery (apocryphal)",
				"truth (apocryphal)",
				"tyranny (apocryphal)",
				"undeath (apocryphal)",
				"vigil (apocryphal)",
				"void (apocryphal)",
				"water (apocryphal)",
				"wealth (apocryphal)",
				"wyrmkin (apocryphal)",
				"zeal (apocryphal)"
			]
		},
		"amp": {
			"type": "object",
			"properties": {
				"entries": {
					"type": "array",
					"items": {
						"$ref": "entry.json"
					}
				},
				"heightened": {
					"$ref": "utils.json#/definitions/heightened"
				}
			},
			"minProperties": 1,
			"additionalProperties": false
		},
		"heightened": {
			"type": "object",
			"properties": {
				"X": {
					"description": "An array of levels to which the spell can be heightened.",
					"type": "object",
					"patternProperties": {
						"^([1-9]|10)$": {
							"description": "An array of effects of heightening the spell to the given level.",
							"type": "array",
							"items": {
								"$ref": "entry.json"
							},
							"minItems": 1
						}
					},
					"minProperties": 1,
					"additionalProperties": false
				},
				"plusX": {
					"type": "object",
					"patternProperties": {
						"^([1-9]|10)$": {
							"type": "array",
							"items": {
								"$ref": "entry.json"
							},
							"minItems": 1
						}
					},
					"minProperties": 1,
					"additionalProperties": false
				}
			},
			"minProperties": 1,
			"additionalProperties": false
		},
		"components": {
			"type": "array",
			"items": {
				"type": "string",
				"oneOf": [
					{
						"enum": [
							"envision",
							"command"
						]
					},
					{
						"pattern": "\\{@action .+?\\}"
					},
					{
						"pattern": "\\{@feat .+?\\}"
					}
				]
			},
			"minItems": 1
		},
		"abilityBlock": {
			"if": {
				"properties": {
					"type": {
						"const": "ability"
					}
				}
			},
			"then": {
				"allOf": [
					{
						"$ref": "#/definitions/creatureAbilityBlock"
					}
				]
			},
			"else": {
				"allOf": [
					{
						"$ref": "#/definitions/afflictionBlock"
					}
				]
			},
			"minItems": 1,
			"uniqueItems": true
		},
		"creatureAbilityBlock": {
			"properties": {
				"type": {
					"type": "string",
					"enum": [
						"ability",
						"affliction"
					]
				},
				"style": {
					"type": "string",
					"enum": [
						"compact",
						"full"
					]
				},
				"name": {
					"type": "string"
				},
				"source": {
					"$ref": "#/definitions/sourceList"
				},
				"page": {
					"type": "integer",
					"minimum": 0
				},
				"range": {
					"$ref": "#/definitions/range"
				},
				"components": {
					"$ref": "#/definitions/components"
				},
				"entries": {
					"type": "array",
					"items": {
						"$ref": "entry.json"
					},
					"minItems": 1
				},
				"trigger": {
					"type": "string"
				},
				"requirements": {
					"type": "string"
				},
				"frequency": {
					"$ref": "#/definitions/frequency"
				},
				"activity": {
					"type": "object",
					"$ref": "#/definitions/activity"
				},
				"actionType": {
					"$ref": "actions.json#/properties/action/items/properties/actionType"
				},
				"traits": {
					"type": "array",
					"items": {
						"type": "string",
						"anyOf": [
							{
								"$ref": "#/definitions/anyTrait"
							}
						]
					},
					"minItems": 1
				},
				"cost": {
					"type": "string"
				},
				"generic": {
					"type": "object",
					"properties": {
						"tag": {
							"$ref": "#/definitions/tags"
						},
						"source": {
							"type": "string",
							"$ref": "utils.json#/definitions/sourceList"
						},
						"name": {
							"type": "string"
						}
					},
					"required": [
						"tag"
					]
				},
				"special": {
					"type": "array",
					"items": {
						"$ref": "entry.json"
					},
					"minItems": 1
				}
			},
			"additionalProperties": false,
			"anyOf": [
				{
					"required": [
						"entries"
					]
				},
				{
					"required": [
						"generic"
					]
				}
			]
		},
		"afflictionBlock": {
			"properties": {
				"type": {
					"const": "affliction"
				},
				"name": {
					"type": "string"
				},
				"savingThrow": {
					"type": "string",
					"enum": [
						"Will",
						"Fortitude"
					]
				},
				"source": {
					"$ref": "#/definitions/sourceList"
				},
				"page": {
					"type": "integer",
					"minimum": 0
				},
				"entries": {
					"type": "array",
					"items": {
						"$ref": "entry.json"
					},
					"minItems": 1
				},
				"level": {
					"oneOf": [
						{
							"type": "integer",
							"exclusiveMinimum": 0
						},
						{
							"const": "your level"
						}
					]
				},
				"note": {
					"type": "string"
				},
				"DC": {
					"type": [
						"integer",
						"string"
					]
				},
				"onset": {
					"type": "string"
				},
				"maxDuration": {
					"type": "string"
				},
				"traits": {
					"type": "array",
					"items": {
						"type": "string",
						"$ref": "#/definitions/anyTrait"
					},
					"minItems": 1
				},
				"stages": {
					"type": "array",
					"items": [
						{
							"properties": {
								"stage": {
									"const": 1
								},
								"entry": {
									"type": "string"
								},
								"duration": {
									"type": "string"
								}
							},
							"additionalProperties": false
						},
						{
							"properties": {
								"stage": {
									"const": 2
								},
								"entry": {
									"type": "string"
								},
								"duration": {
									"type": "string"
								}
							},
							"additionalProperties": false
						},
						{
							"properties": {
								"stage": {
									"const": 3
								},
								"entry": {
									"type": "string"
								},
								"duration": {
									"type": "string"
								}
							},
							"additionalProperties": false
						},
						{
							"properties": {
								"stage": {
									"const": 4
								},
								"entry": {
									"type": "string"
								},
								"duration": {
									"type": "string"
								}
							},
							"additionalProperties": false
						},
						{
							"properties": {
								"stage": {
									"const": 5
								},
								"entry": {
									"type": "string"
								},
								"duration": {
									"type": "string"
								}
							},
							"additionalProperties": false
						},
						{
							"properties": {
								"stage": {
									"const": 6
								},
								"entry": {
									"type": "string"
								},
								"duration": {
									"type": "string"
								}
							},
							"additionalProperties": false
						}
					],
					"additionalItems": false,
					"uniqueItems": true
				}
			},
			"additionalProperties": false
		},
		"attackBlock": {
			"properties": {
				"type": {
					"const": "attack"
				},
				"name": {
					"type": "string"
				},
				"range": {
					"type": "string",
					"enum": [
						"Ranged",
						"Melee"
					]
				},
				"attack": {
					"type": "integer"
				},
				"effects": {
					"type": "array",
					"items": {
						"$ref": "entry.json"
					},
					"minItems": 1
				},
				"traits": {
					"type": "array",
					"items": {
						"type": "string",
						"anyOf": [
							{
								"$ref": "#/definitions/anyTrait"
							}
						]
					},
					"minItems": 1
				},
				"damage": {
					"type": "string"
				},
				"types": {
					"type": "array",
					"items": {
						"type": "string",
						"$ref": "#/definitions/damageType"
					},
					"minItems": 1
				},
				"noMAP": {
					"type": "boolean",
					"enum": [
						true
					]
				}
			},
			"additionalProperties": false,
			"required": [
				"name"
			]
		},
		"defenses": {
			"type": "object",
			"$comment": "HP will NOT match for creatures.",
			"properties": {
				"ac": {
					"type": "object",
					"properties": {
						"std": {
							"type": "integer",
							"exclusiveMinimum": 0
						},
						"note": {
							"type": "string"
						}
					},
					"additionalProperties": {
						"type": "integer"
					},
					"minProperties": 1
				},
				"savingThrows": {
					"type": "object",
					"properties": {
						"fort": {
							"type": "object",
							"properties": {
								"std": {
									"type": "integer",
									"minimum": 0
								}
							}
						},
						"ref": {
							"type": "object",
							"properties": {
								"std": {
									"type": "integer",
									"minimum": 0
								}
							}
						},
						"will": {
							"type": "object",
							"properties": {
								"std": {
									"type": "integer",
									"minimum": 0
								}
							}
						},
						"abilities": {
							"type": "array",
							"items": {
								"type": "string"
							},
							"minItems": 1
						}
					},
					"additionalProperties": false,
					"minProperties": 1
				},
				"hardness": {
					"type": "object",
					"properties": {
						"std": {
							"type": "integer",
							"minimum": 0
						}
					},
					"patternProperties": {
						"^.+$": {
							"type": "integer",
							"minimum": 0
						}
					},
					"additionalProperties": false,
					"minProperties": 1
				},
				"hp": {
					"oneOf": [
						{
							"description": "Hit Points",
							"type": "object",
							"properties": {
								"std": {
									"type": "integer",
									"exclusiveMinimum": 0
								}
							},
							"patternProperties": {
								"^.+$": {
									"type": "integer",
									"exclusiveMinimum": 0
								}
							},
							"additionalProperties": false,
							"minProperties": 1
						},
						{
							"type": "array",
							"items": {
								"description": "Hit Points",
								"type": "object",
								"properties": {
									"std": {
										"type": "integer",
										"exclusiveMinimum": 0
									}
								},
								"patternProperties": {
									"^.+$": {
										"type": "integer",
										"exclusiveMinimum": 0
									}
								},
								"additionalProperties": false,
								"minProperties": 1
							}
						}
					]
				},
				"bt": {
					"description": "Broken Threshold",
					"type": "object",
					"properties": {
						"std": {
							"type": "integer",
							"minimum": 0
						}
					},
					"patternProperties": {
						"^.+$": {
							"type": "integer",
							"exclusiveMinimum": 0
						}
					},
					"additionalProperties": false,
					"minProperties": 1
				},
				"notes": {
					"type": "object",
					"properties": {
						"default": {
							"type": "string"
						}
					},
					"patternProperties": {
						"^.+$": {
							"type": "string"
						}
					},
					"additionalProperties": false,
					"minProperties": 1
				},
				"weaknesses": {
					"type": "array",
					"items": {
						"type": "object",
						"properties": {
							"name": {
								"type": "string"
							},
							"amount": {
								"type": "integer",
								"minimum": 0
							},
							"note": {
								"type": "string"
							}
						},
						"additionalProperties": false
					},
					"minItems": 1
				},
				"resistances": {
					"type": "array",
					"items": {
						"type": "object",
						"properties": {
							"name": {
								"type": "string"
							},
							"amount": {
								"type": "integer",
								"minimum": 0
							},
							"note": {
								"type": "string"
							}
						},
						"additionalProperties": false
					},
					"minItems": 1
				},
				"immunities": {
					"type": "array",
					"items": {
						"type": "string"
					},
					"minItems": 1
				}
			},
			"additionalProperties": false,
			"minProperties": 1
		},
		"genericFluffArray": {
			"type": "array",
			"uniqueItems": true,
			"minItems": 1,
			"items": {
				"anyOf": [
					{
						"type": "object",
						"properties": {
							"name": {
								"type": "string"
							},
							"page": {
								"type": "integer"
							},
							"source": {
								"type": "string"
							},
							"otherSources": {
								"$ref": "#/definitions/otherSources"
							},
							"images": {
								"oneOf": [
									{
										"type": "array",
										"items": {
											"$ref": "entry.json#/definitions/entryImage"
										}
									},
									{
										"type": "null"
									}
								]
							},
							"lore": {
								"type": "array",
								"items": {
									"$ref": "entry.json"
								}
							},
							"entries": {
								"type": "array",
								"items": {
									"$ref": "entry.json"
								}
							},
							"_copy": {
								"type": "object",
								"properties": {
									"name": {
										"type": "string"
									},
									"source": {
										"type": "string"
									},
									"pantheon": {
										"description": "Used in deity data",
										"type": "string"
									},
									"shortName": {
										"description": "Used in subclass data",
										"type": "string"
									},
									"className": {
										"description": "Used in subclass data",
										"type": "string"
									},
									"classSource": {
										"description": "Used in subclass data",
										"type": "string"
									},
									"_mod": {
										"$ref": "#/definitions/_modObject"
									},
									"_trait": {
										"type": "object",
										"properties": {
											"name": {
												"type": "string"
											},
											"source": {
												"type": "string"
											}
										},
										"required": [
											"name",
											"source"
										]
									},
									"_preserve": {
										"type": "object",
										"patternProperties": {
											".*": {
												"type": "boolean"
											}
										}
									}
								},
								"required": [
									"name",
									"source"
								],
								"additionalProperties": false
							}
						},
						"additionalProperties": false,
						"required": [
							"name",
							"source"
						]
					},
					{
						"type": "object",
						"$comment": "This is a custom pre-processor tag, which merges together the array of objects into one. This allows proper inheritance, which JSON schema don't really do.",
						"properties": {
							"name": {
								"type": "string"
							},
							"page": {
								"type": "integer"
							},
							"source": {
								"type": "string"
							},
							"otherSources": {
								"$ref": "#/definitions/otherSources"
							},
							"images": {
								"oneOf": [
									{
										"type": "array",
										"items": {
											"$ref": "entry.json#/definitions/entryImage"
										}
									},
									{
										"type": "null"
									}
								]
							},
							"lore": {
								"type": "array",
								"items": {
									"$ref": "entry.json"
								}
							},
							"entries": {
								"type": "array",
								"items": {
									"$ref": "entry.json"
								}
							},
							"_copy": {
								"type": "object",
								"properties": {
									"name": {
										"type": "string"
									},
									"source": {
										"type": "string"
									},
									"pantheon": {
										"description": "Used in deity data",
										"type": "string"
									},
									"shortName": {
										"description": "Used in subclass data",
										"type": "string"
									},
									"className": {
										"description": "Used in subclass data",
										"type": "string"
									},
									"classSource": {
										"description": "Used in subclass data",
										"type": "string"
									},
									"_mod": {
										"$ref": "#/definitions/_modObject"
									},
									"_trait": {
										"type": "object",
										"properties": {
											"name": {
												"type": "string"
											},
											"source": {
												"type": "string"
											}
										},
										"required": [
											"name",
											"source"
										]
									},
									"_preserve": {
										"type": "object",
										"patternProperties": {
											".*": {
												"type": "boolean"
											}
										}
									}
								},
								"required": [
									"name",
									"source"
								],
								"additionalProperties": false
							}
						},
						"additionalProperties": false,
						"required": [
							"_copy"
						]
					}
				]
			}
		},
		"_modObject": {
			"type": "object",
			"patternProperties": {
				".*": {
					"anyOf": [
						{
							"type": "string"
						},
						{
							"$ref": "#/definitions/copyModifier"
						},
						{
							"type": "array",
							"items": {
								"$ref": "#/definitions/copyModifier"
							}
						}
					]
				}
			}
		},
		"copyModifier": {
			"anyOf": [
				{
					"type": "object",
					"properties": {
						"mode": {
							"const": "replaceTxt"
						},
						"replace": {
							"type": "string"
						},
						"with": {
							"type": "string"
						},
						"flags": {
							"type": "string"
						},
						"props": {
							"description": "If unspecified, defaults to `[null, \"entries\", \"headerEntries\", \"footerEntries\"]`. To apply to _any_ string, including those outside of sub-properties (for instance, when trying to replace text in an array of plain strings), include `null` as one of the props (i.e. `\"props\": [null]`)",
							"type": "array",
							"items": {
								"type": [
									"string",
									"null"
								]
							}
						}
					},
					"required": [
						"replace",
						"with"
					],
					"additionalProperties": false
				},
				{
					"type": "object",
					"properties": {
						"mode": {
							"const": "appendStr"
						},
						"str": {
							"type": "string"
						},
						"joiner": {
							"type": "string"
						}
					},
					"required": [
						"str"
					],
					"additionalProperties": false
				},
				{
					"type": "object",
					"properties": {
						"mode": {
							"const": "prependArr"
						},
						"items": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"type": "object"
								},
								{
									"type": "array"
								}
							]
						}
					},
					"required": [
						"items"
					],
					"additionalProperties": false
				},
				{
					"type": "object",
					"properties": {
						"mode": {
							"const": "appendArr"
						},
						"items": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"type": "object"
								},
								{
									"type": "array"
								}
							]
						}
					},
					"required": [
						"items"
					],
					"additionalProperties": false
				},
				{
					"type": "object",
					"properties": {
						"mode": {
							"const": "appendIfNotExistsArr"
						},
						"items": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"type": "object"
								},
								{
									"type": "array"
								}
							]
						}
					},
					"required": [
						"items"
					],
					"additionalProperties": false
				},
				{
					"type": "object",
					"properties": {
						"mode": {
							"const": "replaceArr"
						},
						"replace": {
							"oneOf": [
								{
									"type": "string"
								},
								{
									"type": "object",
									"properties": {
										"index": {
											"type": "integer"
										}
									},
									"required": [
										"index"
									],
									"additionalProperties": false
								},
								{
									"type": "object",
									"properties": {
										"regex": {
											"type": "string"
										},
										"flags": {
											"type": "string"
										}
									},
									"required": [
										"regex"
									],
									"additionalProperties": false
								}
							]
						},
						"items": {
							"anyOf": [
								{
									"type": "object"
								},
								{
									"type": "array"
								}
							]
						}
					},
					"required": [
						"replace",
						"items"
					],
					"additionalProperties": false
				},
				{
					"type": "object",
					"properties": {
						"mode": {
							"const": "replaceOrAppendArr"
						},
						"replace": {
							"oneOf": [
								{
									"type": "string"
								},
								{
									"type": "object",
									"properties": {
										"index": {
											"type": "integer"
										}
									},
									"required": [
										"index"
									],
									"additionalProperties": false
								},
								{
									"type": "object",
									"properties": {
										"regex": {
											"type": "string"
										},
										"flags": {
											"type": "string"
										}
									},
									"required": [
										"regex"
									],
									"additionalProperties": false
								}
							]
						},
						"items": {
							"anyOf": [
								{
									"type": "object"
								},
								{
									"type": "array"
								}
							]
						}
					},
					"required": [
						"replace",
						"items"
					],
					"additionalProperties": false
				},
				{
					"type": "object",
					"properties": {
						"mode": {
							"const": "insertArr"
						},
						"index": {
							"type": "integer"
						},
						"items": {
							"anyOf": [
								{
									"type": "object"
								},
								{
									"type": "string"
								},
								{
									"type": "array"
								}
							]
						}
					},
					"required": [
						"index",
						"items"
					],
					"additionalProperties": false
				},
				{
					"type": "object",
					"properties": {
						"mode": {
							"const": "removeArr"
						},
						"names": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"type": "array"
								}
							]
						},
						"items": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"type": "array"
								}
							]
						},
						"force": {
							"type": "boolean"
						}
					},
					"additionalProperties": false
				},
				{
					"type": "object",
					"properties": {
						"mode": {
							"const": "scalarAddProp"
						},
						"prop": {
							"type": "string"
						},
						"scalar": {
							"type": "number"
						}
					},
					"required": [
						"mode",
						"scalar",
						"prop"
					],
					"additionalProperties": false
				},
				{
					"type": "object",
					"properties": {
						"mode": {
							"const": "scalarMultProp"
						},
						"prop": {
							"type": "string"
						},
						"scalar": {
							"type": "number"
						},
						"floor": {
							"type": "boolean"
						}
					},
					"required": [
						"mode",
						"scalar",
						"prop"
					],
					"additionalProperties": false
				},
				{
					"type": "object",
					"properties": {
						"mode": {
							"const": "setProps"
						},
						"props": {
							"type": "object"
						}
					},
					"required": [
						"mode",
						"props"
					],
					"additionalProperties": false
				}
			]
		}
	}
}
