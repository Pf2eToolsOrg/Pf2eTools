"use strict";class AbilitiesPage extends ListPage{static sortActions(a,b,o){switch(o.sortBy){case"name":return SortUtil.compareListNames(a,b);case"source":return SortUtil.ascSort(a.values.source,b.values.source)||SortUtil.compareListNames(a,b);case"time":return SortUtil.ascSort(a.values.normalisedTime,b.values.normalisedTime)||SortUtil.compareListNames(a,b)}}constructor(){const pageFilter=new PageFilterAbilities;super({dataSource:"data/abilities.json",pageFilter:pageFilter,listClass:"abilities",listOptions:{fnSort:AbilitiesPage.sortActions},sublistClass:"subabilities",dataProps:["ability"]})}getListItem(it,anI,isExcluded){this._pageFilter.mutateAndAddToFilters(it,isExcluded);const eleLi=document.createElement("li");eleLi.className=`row ${isExcluded?"row--blacklisted":""}`;const source=Parser.sourceJsonToAbv(it.source);const hash=UrlUtil.autoEncodeHash(it);const time=it.activity?Parser.timeToTableStr(it.activity):"—";eleLi.innerHTML=`<a href="#${hash}" class="lst--border">\n\t\t\t<span class="col-6 bold pl-0">${it.name}${it.add_hash?`<span class="ve-muted"> (${it.add_hash})</span>`:""}</span>\n\t\t\t<span class="col-4">${time}</span>\n\t\t\t<span class="col-2 text-center ${Parser.sourceJsonToColor(it.source)}" title="${Parser.sourceJsonToFull(it.source)}" ${BrewUtil.sourceJsonToStyle(it.source)}>${source}</span>\n\t\t</a>`;const listItem=new ListItem(anI,eleLi,it.name,{hash:hash,source:source,time:time,normalisedTime:Parser.getNormalisedTime(it.activity),aliases:it.alias?it.alias.join(" - "):""},{uniqueId:it.uniqueId?it.uniqueId:anI,isExcluded:isExcluded});eleLi.addEventListener("click",(evt=>this._list.doSelect(listItem,evt)));eleLi.addEventListener("contextmenu",(evt=>ListUtil.openContextMenu(evt,this._list,listItem)));return listItem}handleFilterChange(){const f=this._filterBox.getValues();this._list.filter((item=>this._pageFilter.toDisplay(f,this._dataList[item.ix])));FilterBox.selectFirstVisible(this._dataList)}getSublistItem(it,pinId){const hash=UrlUtil.autoEncodeHash(it);const time=it.activity?Parser.timeToTableStr(it.activity):"—";const $ele=$(`<li class="row">\n\t\t\t<a href="#${hash}" class="lst--border">\n\t\t\t\t<span class="bold col-8 pl-0">${it.name}</span>\n\t\t\t\t<span class="col-4 pr-0">${time}</span>\n\t\t\t</a>\n\t\t</li>`).contextmenu((evt=>ListUtil.openSubContextMenu(evt,listItem)));const listItem=new ListItem(pinId,$ele,it.name,{hash:hash,time:time,normalisedTime:Parser.getNormalisedTime(it.activity)});return listItem}doLoadHash(id){const it=this._dataList[id];renderStatblock(it);ListUtil.updateSelected()}async pDoLoadSubHash(sub){sub=this._filterBox.setFromSubHashes(sub);await ListUtil.pSetFromSubHashes(sub)}}function renderStatblock(ability){const $content=$("#pagecontent").empty();function buildStatsTab(){$content.append(Renderer.ability.getRenderedString(ability))}const buildInfoTab=async()=>{const quickRules=await Renderer.utils.pGetQuickRules("ability");$content.append(quickRules)};const statTab=Renderer.utils.tabButton("Ability",(()=>{}),buildStatsTab);const infoTab=Renderer.utils.tabButton("Quick Rules",(()=>{}),buildInfoTab);Renderer.utils.bindTabButtons(statTab,infoTab)}const abilitiesPage=new AbilitiesPage;window.addEventListener("load",(()=>abilitiesPage.pOnLoad()));